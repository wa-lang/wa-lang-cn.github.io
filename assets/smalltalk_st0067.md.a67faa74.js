import{_ as s,c as a,o as n,a as o}from"./app.7586e3b1.js";const l="/st0067-01.png",e="/st0067-02.png",p="/st0067-03.png",t="/st0067-04.png",u=JSON.parse('{"title":"使用凹语言开发Dora SSR游戏","description":"","frontmatter":{},"headers":[{"level":2,"title":"1. Dora SSR引擎","slug":"_1-dora-ssr引擎","link":"#_1-dora-ssr引擎","children":[]},{"level":2,"title":"2. 创建新项目","slug":"_2-创建新项目","link":"#_2-创建新项目","children":[]},{"level":2,"title":"3. 凹语言编写游戏代码","slug":"_3-凹语言编写游戏代码","link":"#_3-凹语言编写游戏代码","children":[]},{"level":2,"title":"4. 上传并运行游戏","slug":"_4-上传并运行游戏","link":"#_4-上传并运行游戏","children":[]},{"level":2,"title":"5. 后记","slug":"_5-后记","link":"#_5-后记","children":[]}],"relativePath":"smalltalk/st0067.md"}'),r={name:"smalltalk/st0067.md"},c=o('<h1 id="使用凹语言开发dora-ssr游戏" tabindex="-1">使用凹语言开发Dora SSR游戏 <a class="header-anchor" href="#使用凹语言开发dora-ssr游戏" aria-hidden="true">#</a></h1><ul><li>时间：2025-01-12</li><li>撰稿：凹语言开发组</li><li>转载请注明原文链接：<a href="https://wa-lang.org/smalltalk/st0067.html" target="_blank" rel="noreferrer">https://wa-lang.org/smalltalk/st0067.html</a></li></ul><hr><p>Dora SSR是一款开源的2D游戏引擎，具有多语言支持、跨平台、高效开发工具链、丰富游戏功能等诸多优势，能帮助开发者快速制作游戏。最近Dora SSR作者增加了对凹语言开发游戏脚本的支持，具体可以参考 <a href="https://mp.weixin.qq.com/s/rk9LlKo2M8N5li9CNZrbhw" target="_blank" rel="noreferrer">给凹语言编写游戏引擎绑定的故事</a>。这里将简单展示如何使他凹语言开发一个Dora SSR游戏演示程序。</p><h2 id="_1-dora-ssr引擎" tabindex="-1">1. Dora SSR引擎 <a class="header-anchor" href="#_1-dora-ssr引擎" aria-hidden="true">#</a></h2><p>在开始开发之前，除了安装凹语言环境，还需要安装 Dora SSR 游戏引擎。该引擎支持多种平台，包括 Windows、Linux、macOS、iOS 和 Android。具体的安装步骤和要求，请参见官方快速开始指南：<a href="https://dora-ssr.net/zh-Hans/docs/tutorial/quick-start/" target="_blank" rel="noreferrer">Dora SSR 快速开始</a>。</p><p><img src="'+l+'" alt=""></p><h2 id="_2-创建新项目" tabindex="-1">2. 创建新项目 <a class="header-anchor" href="#_2-创建新项目" aria-hidden="true">#</a></h2><p>在 Dora SSR 引擎的二进制程序启动以后，在浏览器中打开 Dora SSR 的 Web IDE，右键点击左侧游戏资源树，选择「新建」并创建名为「Hello」的新文件夹。</p><p><img src="'+e+`" alt=""></p><h2 id="_3-凹语言编写游戏代码" tabindex="-1">3. 凹语言编写游戏代码 <a class="header-anchor" href="#_3-凹语言编写游戏代码" aria-hidden="true">#</a></h2><p>首先克隆 <a href="https://github.com/IppClub/dora-wa" target="_blank" rel="noreferrer">https://github.com/IppClub/dora-wa</a> 仓库，然后按照仓库的 <a href="http://readme.md" target="_blank" rel="noreferrer">readme.md</a> 文档将 <code>src/main.wa</code> 修改为以下代码：</p><div class="language-go"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">import</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">dora</span><span style="color:#ECEFF4;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">func</span><span style="color:#D8DEE9FF;"> init </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	</span><span style="color:#616E88;">// create a sprite</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	</span><span style="color:#D8DEE9;">sprite</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">:=</span><span style="color:#D8DEE9FF;"> dora</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">NewSpriteWithFile</span><span style="color:#ECEFF4;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Image/logo.png</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9FF;">	</span><span style="color:#616E88;">// create a root node of the game scene tree</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	</span><span style="color:#D8DEE9;">root</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">:=</span><span style="color:#D8DEE9FF;"> dora</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">NewNode</span><span style="color:#ECEFF4;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9FF;">	</span><span style="color:#616E88;">// mount the sprite to the root node of the game scene tree</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	root</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">AddChild</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9FF;">sprite</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9FF;">Node</span><span style="color:#ECEFF4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9FF;">	</span><span style="color:#616E88;">// receive and process tap event to move the sprite</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	root</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">OnTapBegan</span><span style="color:#ECEFF4;">(</span><span style="color:#81A1C1;">func</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9FF;">touch</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> dora</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9FF;">Touch</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">		sprite</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">PerformDef</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9FF;">dora</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">ActionDefMoveTo</span><span style="color:#ECEFF4;">(</span></span>
<span class="line"><span style="color:#D8DEE9FF;">			</span><span style="color:#B48EAD;">1.0</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;">                  </span><span style="color:#616E88;">// duration, unit is second</span></span>
<span class="line"><span style="color:#D8DEE9FF;">			sprite</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">GetPosition</span><span style="color:#ECEFF4;">(),</span><span style="color:#D8DEE9FF;"> </span><span style="color:#616E88;">// start position</span></span>
<span class="line"><span style="color:#D8DEE9FF;">			touch</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">GetLocation</span><span style="color:#ECEFF4;">(),</span><span style="color:#D8DEE9FF;">  </span><span style="color:#616E88;">// end position</span></span>
<span class="line"><span style="color:#D8DEE9FF;">			dora</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9FF;">EaseOutBack</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;">     </span><span style="color:#616E88;">// easing function</span></span>
<span class="line"><span style="color:#D8DEE9FF;">		</span><span style="color:#ECEFF4;">),</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">false</span><span style="color:#ECEFF4;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	</span><span style="color:#ECEFF4;">})</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span></code></pre></div><p>其中<code>dora.NewSpriteWithFile(&quot;Image/logo.png&quot;)</code>是创建了一个Logo精灵。因此还需要一个<code>Image/logo.png</code>路径的图片文件，可以自行找一个Logo图片放到该路径下。</p><p>构建生成 WASM 文件：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#d8dee9ff;">wa build -optimize</span></span>
<span class="line"><span style="color:#d8dee9ff;"></span></span></code></pre></div><p>成功将生成<code>output/init.wasm</code>文件。</p><h2 id="_4-上传并运行游戏" tabindex="-1">4. 上传并运行游戏 <a class="header-anchor" href="#_4-上传并运行游戏" aria-hidden="true">#</a></h2><p>在 Dora SSR Web IDE 中，右键点击新创建的文件夹「Hello」，选择「上传」并上传编译好的 WASM 文件 init.wasm和Logo图片文件。</p><p><img src="`+p+'" alt=""></p><p>然后运行的效果如下：</p><p><img src="'+t+'" alt=""></p><h2 id="_5-后记" tabindex="-1">5. 后记 <a class="header-anchor" href="#_5-后记" aria-hidden="true">#</a></h2><p>这是一个简单甚至简陋的教程，目前展示的程序和凹语言本身都是，但是在程序跑起来的瞬间依然激动。Dora SSR和凹语言两个都是诞生于民间的草根开源项目，项目发起人纯萃是因为热爱而启动并维护各自项目多年。而现在这两个来自不同领域的国产草根项目居然在一个极为小众的领域会师（这让我回想起2023年底在成都的国产编程语言会师场景），我终于可以用自己的语言在一个同样是国产的游戏引擎上玩耍小游戏开发了。虽然一切挑战才刚刚开始，但是Dora SSR作为凹语言社区的第一个种子项目，更让我们看到了未来无限的可能性。</p>',24),E=[c];function i(F,d,y,D,h,C){return n(),a("div",null,E)}const g=s(r,[["render",i]]);export{u as __pageData,g as default};
